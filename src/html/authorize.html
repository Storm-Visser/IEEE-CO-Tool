<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Authorize</title>
</head>
<body>
  <h2>Processing authorization...</h2>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
  <script>
    const appKey = 'f8da03ef4e7b8f8ed708470a3680fab2';
    const appName = 'IEEECOTOOL';

    const t = window.TrelloPowerUp.iframe({ appKey, appName, appAuthor: 'IEEE' });

    const urlParams = new URLSearchParams(window.location.search);
    const token = urlParams.get('token') || window.location.hash.split('=')[1];

    if (token) {
      console.log('Token received:', token);

      if (window.authorize) {
        window.authorize(token);
      }

      window.close();
    } else {
      console.error('No token found in URL');
    }
  </script>
</body>
</html>